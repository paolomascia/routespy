# RouteSpy Ô∏è

**RouteSpy** is an open-source tool designed for **real-time network traffic monitoring**. It captures outgoing network packets from your PC and displays the geographical destination of these packets on a live map.

The primary goal is to provide an immediate and intuitive **analysis of potential risks** associated with suspicious communications, such as those generated by malware or unknown software.

![Alt text](screenshot.png?raw=true)

## Key Features

| Feature | Description |
|---------|-------------|
| **Real-time Packet Sniffing** | Utilizes **Scapy** to intercept outgoing TCP and UDP packets. |
| **IP Geolocation** | Integrates with an external API to obtain the geographical location (latitude/longitude) for destination IP addresses. |
| **Live Map Visualization** | Uses **Eel** to dynamically update a web UI (HTML/JS) showing captured traffic flows on a global map. |
| **Pause/Resume** | Ability to suspend and resume the packet capture process. |
| **Persistent Configuration** | Saves and loads settings (e.g., API URL, API Key) from a `config.json` file. |
| **Threaded Capture** | The sniffing process runs in a separate thread to ensure the graphical interface remains responsive and unblocked. |

## Technologies Used

### Backend (Python)

- **Python**
- **Scapy**: Essential for packet sniffing and analysis.
- **Eel**: Connects the Python backend with the HTML/JS frontend.
- `threading`: Enables concurrent execution for non-blocking packet capture.
- `json`: Used for configuration file management.

### Frontend (Web UI)

- **HTML + JavaScript**: Renders the dynamic interface via Eel.
- **Mapping Library**: (Implicitly, for geolocated data visualization on the map).
- **External APIs**: Used for resolving IP addresses into geographical coordinates (city, country, lat, long).

## How It Works

1. **Start Capture:** The `start_packet_capture()` function initiates a separate thread that runs the sniffing loop.

2. **Packet Interception:**
   - If a packet contains a **TCP** layer, the destination IP is registered, and an API request is made for its geographical location.
   - **UDP** packets are handled similarly (with provisions for future integration of traceroute).

3. **UI Update:** The coordinates are sent to the web UI using `eel.updateData(coord, protocol)`, which dynamically updates the map in real-time, distinguishing between TCP and UDP traffic.

4. **User Control:** Functions like `pause_packet_capture()` and `save_config()` allow users to manage the capture state and persistent settings.

## Potential Use Cases

| Category | Description |
|----------|-------------|
| **Security Monitoring** | Identify suspicious communications directed towards unusual or foreign IP addresses. |
| **Malware Detection** | Provides a visual overview of potential C2 (Command & Control) servers contacted by malicious processes. |
| **Educational Analysis** | An invaluable tool for cybersecurity and networking students to visualize how packets traverse the network. |
| **Network Awareness** | Gain insights into which services and applications are generating external traffic. |

## Future Enhancements & Considerations

- **Geolocation Accuracy:** Enhance reliability by supporting multiple IP geolocation providers (e.g., MaxMind, ip-api) with a fallback mechanism.
- **Interactive UI:** Implement functionality to click on map points to view detailed packet information or the originating process.
- **Protocol Diversity:** Expand beyond current TCP/UDP support to include ICMP and other protocols.
- **Performance:** For high-traffic environments, consider using an asynchronous queue/buffer instead of packet-by-packet processing.
- **Security Hardening:** As a sniffer, it requires elevated privileges; consider sandboxing or limitations to prevent misuse.
- **Packaging:** Create a standalone executable (e.g., using **PyInstaller**) for easier distribution to non-Python users.
